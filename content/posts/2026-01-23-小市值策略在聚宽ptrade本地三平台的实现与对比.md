---
title: "小市值策略在聚宽、PTrade、本地三平台的实现与对比"
date: 2026-01-23T23:57:34+08:00
lastmod: 2026-01-23T23:57:34+08:00
author: "Python本地量化"
categories: ["投资策略", "AI与技术", "市场分析"]
tags: ["量化投资", "小市值策略", "Python", "策略回测", "聚宽", "PTrade", "本地量化"]
---

**作者**: Python本地量化

在量化投资的世界里，“小市值策略”一直是散户投资者和量化团队反复研究的经典思路之一。前几年，聚宽论坛里有一个简单的小市值策略比较火爆，策略逻辑简单，其接地气的风格，被人尊称为[“卖菜大妈策略”](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484294&idx=1&sn=3727aa52fe514715cd302ea6c652c55d&scene=21#wechat_redirect)。原策略链接如下：

https://www.joinquant.com/view/community/detail/6158d3c096bec67025c930295d6ae277

今天我们把它在聚宽、PTrade、本地 Python 环境三个平台都实现了一遍，并做了简单对比。

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6cd7yoGMPvWq1260BUjsHtyhhsrQQQZWSQRJdH1P3Or7KGqibBOBzwulg/640?wx_fmt=png&from=appmsg)PTrade代码
![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6cwss0JJ2mfxLiaOxL6Ea5qmReJ2m0KDSDaW7gdibQKKYUt8SHeBMqBqLA/640?wx_fmt=png&from=appmsg)本地Python代码

### 策略逻辑

这个策略的逻辑非常简洁，适合新手上手学习。核心思路是：

1.  **筛选小市值股票**
    *   一般选取流通市值较小的股票，理由很简单：小市值股的弹性更大，更容易出现超额收益。
    *   但同时也意味着风险更高，尤其在市场整体下行或流动性收紧时，小票往往跌得更惨。

2.  **结合股息率进行过滤**
    *   在小市值池子里，再筛选出股息率较高的股票。
    *   高股息往往意味着公司有一定现金流支撑，能在一定程度上规避“纯题材炒作”的风险。
    *   当然，这里的股息率过滤更多是一种辅助因子，不代表公司基本面一定很好。

3.  **价格门槛**
    *   额外加一个“低价股”条件，比如股价低于一定阈值（如 9元）。
    *   低价股往往更容易吸引散户关注，在市场热度上升时更容易放量上涨。

4.  **组合构建与调仓**
    *   每月或每季度定期调仓，选出符合条件的 10–20 只股票等权买入。
    *   持仓期间不做复杂操作，仅涨停打开后卖出，简单持有，周期结束后重新选股。

这样，一个“低价 + 分红 + 小市值”的组合就成型了。逻辑非常直白，但也很好地符合了 A 股散户的炒作偏好。

### 策略回测表现

根据聚宽平台上的回测结果：

*   **年化收益率**：33.40%
*   **最大回撤**：26.41%，出现在 2024 年年初的小市值股灾中，当时流动性极差。

这说明策略确实有“高收益”的一面，但风险也不容忽视。对于小资金投资者来说，它可以作为一个学习和尝试的方向，但绝不适合作为“无脑买入”的长期策略。

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6ckWzTu2b41HFbMI3YjzOQC4kmHOPwVPv00egzgXMoVtZzxAs69lN5zg/640?wx_fmt=png&from=appmsg)聚宽回测结果

### 三个平台的对比

我们在 **聚宽、Ptrade、本地 Python** 三个平台上都实现并评估了该策略，整体回测结果相差不大。但平台各有优缺点：

#### 聚宽（JoinQuant）

*   **优点**：策略原始出处，直接复制粘贴就能运行；自带数据源和回测框架；支持模拟盘。
*   **缺点**：实盘衔接不太方便；数据扩展性有限。
*   **适合人群**：新手学习、跑跑小策略。

#### Ptrade

*   **优点**：无需搭建环境，代码放上去就能跑；支持直接实盘交易，非常适合“懒人量化”。
*   **缺点**：回测速度慢，代码调试不便，不太适合开发复杂策略。
*   **适合人群**：想快速上实盘，但不想折腾环境的学习者。

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6cj2FVljicZ7vlIl4iacaofv5FiceTuKdQA6L7bNpXNLEFOaQbQeRgkvMPw/640?wx_fmt=png&from=appmsg)PTrade回测结果

#### 本地 Python 环境

*   **优点**：灵活度最高，可以随意扩展；回测速度快，调试方便；能集成各种第三方库。
*   **缺点**：需要自己处理数据源和交易接口；要实盘必须对接券商或第三方工具。当然，我们也已经搭建好了[本地策略开发和回测的框架](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484325&idx=1&sn=f66675d6a840999e94e050497177c501&scene=21#wechat_redirect)，方便个人学习爱好者进行策略研究。
*   **适合人群**：策略研究者、开发者，想要深入优化策略。

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6c1TF0rzruOpoCHVyx6w0ub2SEpLqudlDeDAAiafT1Zh2Mib1VHnQguHnw/640?wx_fmt=png&from=appmsg)本地回测结果

### 总结

这个小市值策略胜在：

*   **逻辑简单**，适合快速上手
*   **数据需求低**，几乎不需要复杂财务因子
*   **学习价值高**，能让初学者完整体验从策略到回测、再到实盘的流程

当然，它的不足也很明显：风险极高，最大回撤动辄 20% 以上，一旦市场流动性收紧，很容易陷入困境。因此，这个策略更适合**学习与研究**，而不是直接搬去实盘大仓位操作。

我们已将三个平台的完整代码版本都上传到**知识星球**，感兴趣的朋友可以加入，一起交流学习。

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_png/H8KH2QtJG78x7n8y4KTPic082iaAAxfn6caQ73wNovgvRdLRSdM6ez1mAHqTMoC3aKicDKYT20dyrTbPZleK5A2MQ/640?wx_fmt=png&from=appmsg)往期回顾
[策略本地回测太逆天？让聚宽也来“帮你把把关”！](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484352&idx=1&sn=9045010de2a9d5ae96d67ac0f246b01f&scene=21#wechat_redirect)
[三大经典小市值策略全面解析，收益 vs 风险谁更强？](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484333&idx=1&sn=34a4b5d7ca59c618ed7b9c562408ee83&scene=21#wechat_redirect)
[四大搅屎棍策略：不被周期股带节奏，专注主线机会](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484319&idx=1&sn=570e5be7e42e3e710f68f80fbe43b7ac&scene=21#wechat_redirect)
[行业宽度择时+小市值：简单组合竟实现70%年化收益，夏普高达3以上](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484304&idx=1&sn=890c71c26530173005756eccf0b099cc&scene=21#wechat_redirect)
[如何用Tushare获取长时段、全市场日行情？](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484245&idx=1&sn=686f1137de79241c8c5a46a2ea466c85&scene=21#wechat_redirect)
[市场宽度展示本地化：不再依赖聚宽，一键掌握行业强弱](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484229&idx=1&sn=92f72bb21b68544f8ec8ff38c4faa834&scene=21#wechat_redirect)
[如何在本地开发量化策略并回测？以ETF轮动策略和Backtrader为例](https://mp.weixin.qq.com/s?__biz=MzIwODI2NDUzNw==&mid=2247484166&idx=1&sn=670c9e6237d87b6e7ae41c7dd4fe18bd&scene=21#wechat_redirect)

**知识星球：Alpha学习研究**

不定期更新可本地运行的量化工具、策略等Python代码，方便个人学习研究。代码持续更新，让Bug远离我们。Quant for Everyone！

![](https://i0.wp.com/mmbiz.qpic.cn/sz_mmbiz_jpg/H8KH2QtJG78CYl7t40VJdRfqexsJLUDNZl8ic35aKsz0l8yXeZZPjGlhDggEgpxzWBGbH6XVKseY2b4IcBGdEfg/640?wx_fmt=jpeg&from=appmsg)

---

**免责声明**

本文所涉及的内容仅用于学习研究与技术交流，不构成任何投资建议。文中观点、策略及数据仅供参考，投资者据此操作风险自负。我们不对因使用本文内容所产生的任何直接或间接损失承担责任。市场有风险，入市需谨慎。

---
*来源: [微信公众号](https://mp.weixin.qq.com/s/JCncrhD5b16ohHs9ZEZUiw)*