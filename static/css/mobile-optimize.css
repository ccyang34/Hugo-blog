/* 
 * 移动端阅读体验优化
 * 针对手机屏幕减小字号、行高及间距，使排版更紧凑
 */

@media screen and (max-width: 767px) {
    :root {
        --article-font-size: 1.6rem !important;
        --article-line-height: 1.6 !important;
        --card-padding: 15px !important;
        --section-separation: 10px !important;
        --main-top-padding: 10px !important;
    }

    /* 主容器间距优化 */
    .main-container {
        padding-left: 0 !important;
        padding-right: 0 !important;
        padding-top: 0 !important;
        gap: 8px !important;
    }

    /* 左侧边栏头部下移对齐 + 边距 + 背景色 */
    .left-sidebar header {
        padding-top: 15px !important;
        padding-left: 15px !important;
        padding-right: 15px !important;
        padding-bottom: 5px !important;
        background: #2d3748 !important;
        border-bottom: 1px solid #4a5568 !important;
    }

    .left-sidebar header .site-name a {
        color: #fff !important;
    }

    /* 分类导航栏 */
    .main-category-nav {
        padding-top: 10px !important;
        padding-bottom: 10px !important;
    }

    /* 底部页脚边距 */
    .site-footer {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    /* 相关文章区域边距（包括标题） */
    .related-content--wrapper {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    /* 分类/标签页面标题：取消大写、增加边距 */
    .section-title {
        text-transform: none !important;
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    /* 分类导航紧凑化 - 支持横向滑动 */
    .main-category-nav {
        margin-top: 0 !important;
        margin-bottom: 0 !important;
        padding: 0 !important;
        /* 容器无内边距，实现边缘对齐 */
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        /* iOS惯性滚动 */
        scrollbar-width: none !important;
        /* Firefox隐藏滚动条 */
    }

    .main-category-nav::-webkit-scrollbar {
        display: none !important;
        /* Chrome/Safari隐藏滚动条 */
    }

    .main-category-nav .category-list {
        display: flex !important;
        flex-wrap: nowrap !important;
        gap: 10px !important;
        width: max-content !important;
        /* 确保内容撑开宽度 */
        padding: 0 15px !important;
        /* 内边距加在内容上，保证滚动首尾留白 */
    }

    .main-category-nav .category-item {
        flex-shrink: 0 !important;
        white-space: nowrap !important;
        display: inline-block !important;
        /* 也可以是 flex, 但 inline-block 兼容性较好 */
    }

    /* 文章列表间距 */
    .article-list {
        gap: 8px !important;
        margin-top: 8px !important;
    }

    /* 主页文章标题字号 */
    .article-list .article-title {
        font-size: 1.8rem !important;
    }

    /* 主页文章摘要字号 */
    .article-list .article-subtitle {
        font-size: 1.4rem !important;
    }

    /* =========================================
       其他原有针对文章详情页的优化保持不变
       ========================================= */

    /* 文章页主容器无边距 */
    .article-page .main-container {
        padding-left: 0 !important;
        padding-right: 0 !important;
    }

    /* 移除文章卡片的圆角和阴影 */
    .article-page .main-article {
        border-radius: 0 !important;
        box-shadow: none !important;
    }

    /* 隐藏文章详情页的头图 */
    .article-page .main-article .article-header .article-image {
        display: none !important;
    }

    /* 文章头图全屏（如果需要显示时） */
    .article-page .main-article .article-header .article-image img {
        border-radius: 0 !important;
    }



    /* 文章内容区保留适当内边距（避免文字贴边） */
    .article-page .main-article .article-content {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    .article-page .main-article .article-header .article-details {
        padding-left: 15px !important;
        padding-right: 15px !important;
    }

    .article-page .main-article .article-footer {
        margin-left: 15px !important;
        margin-right: 15px !important;
    }

    /* 段落间距 */
    .article-page .main-article .article-content p {
        margin: 0.8em 0 !important;
    }

    /* 标题字号 */
    /* 标题字号 */
    .article-page .main-article .article-content h2 {
        font-size: 2.0rem !important;
        margin-top: 1.2em !important;
        margin-bottom: 0.6em !important;
    }

    .article-page .main-article .article-content h3 {
        font-size: 1.8rem !important;
        margin-top: 1em !important;
        margin-bottom: 0.5em !important;
    }

    /* 列表紧凑化 */
    .article-page .main-article .article-content ul,
    .article-page .main-article .article-content ol {
        padding-left: 1.2em !important;
        margin-bottom: 0.8em !important;
    }

    .article-page .main-article .article-content li {
        margin-bottom: 0.4em !important;
    }

    /* 引用块 */
    .article-page .main-article .article-content blockquote {
        padding: 10px 15px !important;
        margin: 1em 0 !important;
    }

    /* 相关文章改为垂直列表 */
    .related-content {
        overflow-x: visible !important;
        padding-bottom: 10px !important;
    }

    .related-content>.flex {
        float: none !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 10px !important;
    }

    .related-content article {
        width: 100% !important;
        height: auto !important;
        margin-right: 0 !important;
        background: var(--card-background) !important;
        border-radius: var(--tag-border-radius) !important;
        box-shadow: none !important;
        border: 1px solid #e2e8f0 !important;
    }

    .related-content article .article-details {
        padding: 12px !important;
    }

    .related-content article .article-title {
        font-size: 1.2rem !important;
        margin-bottom: 4px !important;
    }

    .related-content article .article-time {
        font-size: 0.85rem !important;
        color: #a0aec0 !important;
        margin-top: 2px !important;
    }

    .related-content .article-image {
        display: none !important;
    }
}

/* =========================================
   全局样式（适用于所有屏幕尺寸）
   使用高优先级选择器覆盖主题默认样式
   ========================================= */

/* 文章详情页描述字体缩小 */
.article-page .article-header .article-subtitle {
    font-size: 1.2rem !important;
    line-height: 1.5 !important;
    color: #666 !important;
}

/* 文章列表缩略图 - 右侧显示，带留白 */
section.article-list article .article-header,
.article-list article .article-header,
article .article-header {
    display: flex !important;
    flex-direction: row-reverse !important;
    align-items: center !important;
    overflow: hidden !important;
}

section.article-list article .article-image,
.article-list article .article-image {
    width: 100px !important;
    min-width: 100px !important;
    max-width: 100px !important;
    height: 80px !important;
    max-height: 80px !important;
    margin: 12px !important;
    display: block !important;
    flex-shrink: 0 !important;
    border-radius: 6px !important;
    overflow: hidden !important;
}

section.article-list article .article-image a,
section.article-list article .article-image img,
.article-list article .article-image a,
.article-list article .article-image img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    border-radius: 6px !important;
}

section.article-list article .article-details,
.article-list article .article-details {
    flex: 1 !important;
    min-width: 0 !important;
    padding: 12px 10px 12px 12px !important;
}

/* =========================================
   分类标签样式 - 使用主题原始颜色
   ========================================= */

/* 分类标签容器 */
footer.article-time .article-category-footer,
.article-time .article-category-footer,
.article-category-footer {
    display: inline-flex !important;
    align-items: center !important;
    margin-left: 8px !important;
    gap: 5px !important;
}

/* 分类标签基础样式 - 高优先级 */
footer.article-time .article-category-footer a.category-tag,
.article-time .article-category-footer a.category-tag,
.article-category-footer a.category-tag,
.article-details a.category-tag,
a.category-tag {
    display: inline-flex !important;
    align-items: center !important;
    padding: 2px 8px !important;
    border-radius: 4px !important;
    line-height: 1.4 !important;
    font-size: 1.4rem !important;
    text-transform: none !important;
    margin-left: 0 !important;
    color: #ffffff !important;
    text-decoration: none !important;
    font-weight: 400 !important;
    vertical-align: middle !important;
    background-color: #34495e !important;
}

/* 根据文章序号循环使用5种颜色（与主题一致） */
section.article-list article:nth-child(5n+1) a.category-tag,
.article-list article:nth-child(5n+1) a.category-tag {
    background-color: #8ea885 !important;
}

section.article-list article:nth-child(5n+2) a.category-tag,
.article-list article:nth-child(5n+2) a.category-tag {
    background-color: #df7988 !important;
}

section.article-list article:nth-child(5n+3) a.category-tag,
.article-list article:nth-child(5n+3) a.category-tag {
    background-color: #0177b8 !important;
}

section.article-list article:nth-child(5n+4) a.category-tag,
.article-list article:nth-child(5n+4) a.category-tag {
    background-color: #ffb900 !important;
}

section.article-list article:nth-child(5n+5) a.category-tag,
.article-list article:nth-child(5n+5) a.category-tag {
    background-color: #6b69d6 !important;
}

a.category-tag:hover {
    filter: brightness(0.9) !important;
}

/* =========================================
   文章卡片整体可点击
   使用 ::after 伪元素覆盖实现
   ========================================= */

/* 文章列表中的 article 设置为相对定位 */
section.article-list article,
.article-list article,
article:has(.article-details) {
    position: relative !important;
    cursor: pointer !important;
    transition: box-shadow 0.2s ease, transform 0.15s ease !important;
}

/* 悬停效果 - 提升可点击感知 */
section.article-list article:hover,
.article-list article:hover,
article:has(.article-details):hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    transform: translateY(-2px) !important;
}

/* 标题链接扩展为覆盖整个卡片的可点击区域 */
.article-details .article-title a::after {
    content: "" !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 1 !important;
}

/* 确保分类标签可独立点击（层级高于覆盖层） */
.article-details a.category-tag,
a.category-tag {
    position: relative !important;
    z-index: 2 !important;
}

/* 确保图片链接也保持可点击 */
.article-image a {
    position: relative !important;
    z-index: 2 !important;
}

/* =========================================
   文章浏览页：禁用卡片点击和 hover 效果
   ========================================= */

/* 禁用文章浏览页的 hover 移动效果 */
.article-page article,
.article-page .main-article {
    cursor: auto !important;
    transform: none !important;
    transition: none !important;
}

.article-page article:hover,
.article-page .main-article:hover {
    box-shadow: none !important;
    transform: none !important;
}

/* 禁用文章浏览页的所有点击覆盖层 */
.article-page .article-title a::after,
.article-page .article-details .article-title a::after,
.article-page .main-article .article-title a::after,
.article-page article a::after {
    content: none !important;
    display: none !important;
    position: static !important;
    width: 0 !important;
    height: 0 !important;
}

/* 确保文章浏览页内的链接正常（不扩展点击区域） */
.article-page .article-content a,
.article-page .article-header a,
.article-page .article-details a {
    position: static !important;
}

/* 禁用文章浏览页的 pointer-events 覆盖 */
.article-page .main-article {
    pointer-events: auto !important;
}

.article-page .main-article * {
    pointer-events: auto !important;
}

/* =========================================
   文章阅读量显示控制
   ========================================= */

/* 默认隐藏（在列表页不显示，避免 ID 冲突和数据错误） */
.article-view-count {
    display: none !important;
}

/* 仅在文章详情页（Body class: article-page）显示 */
.article-page .article-view-count {
    display: inline-flex !important;
    align-items: center !important;
    margin-left: 10px !important;
    /* 与前面图标的间距 */
}

.article-page .article-view-count span {
    display: inline-flex !important;
    align-items: center !important;
    gap: 4px !important;
}