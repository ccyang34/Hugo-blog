{
    {- $.Scratch.Add "index" slice -
    }
}
{
    {- range .Site.RegularPages -
    }
}
  {
    {- if ne .Type "search" -
    }
}
    {
    {- $.Scratch.Add "index" (dict "title" .Title "body" (.Plain | truncate 5000) "link" .Permalink "section" .Section "tags" .Params.tags) -
    }
}
  {
    {- end -
    }
}
{
    {- end -
    }
}
{
    {- jsonify (uniq ($.Scratch.Get "index")) -
    }
}